# 一进二低吸战法量化交易策略

本策略是一种基于技术指标和价格行为的A股量化交易策略，主要针对涨停后的低吸机会，通过MACD指标的变化来捕捉买入和卖出时机。

## 策略文件结构

- `config.py`: 策略专属配置文件，包含一进二低吸战法策略的特定参数
- `indicator.py`: MACDFS指标计算模块
- `stock_pool.py`: 股票选股模块
- `strategy.py`: 策略核心逻辑模块
- `main.py`: 策略入口文件

## 使用方法

1. 修改项目根目录的全局配置文件 `config.py`：

```python
# 账户配置
ACCOUNT_ID = "你的QMT资金账号"  # 资金账号
MINI_QMT_PATH = "C:\\东方证券同花顺\\miniQMT"  # miniQMT客户端安装路径
```

2. 根据需要调整策略专属参数（位于策略目录下的 `config.py`）：

```python
# 买入条件参数
BUY_AMOUNT = 10000  # 每次买入金额（元）
MAX_BUY_TIMES = 2  # 同一只股票当日最多买入次数
MAX_INTRADAY_GAIN = 0.09  # 日内最高涨幅限制（9%）
```

3. 运行策略：

```bash
python strategys/一进二低吸战法/main.py
```

## 策略逻辑

1. **选股条件**：
   - 昨天涨停的股票，但排除一字板
   - 近3个交易日内的首次涨停
   - 昨天收盘价是近30个交易日的最高价
   - 只选择主板股票，排除ST股和停牌股
   - 公司总市值上限为150亿元

2. **买入条件**：
   - MACDFS绿柱连续两根上缩
   - 日内涨幅不超过9%
   - 当前价格大于分时均价
   - 同一只股票，当天已有成交时，新买入价格不能低于上一次买入价格
   - 同一只股票，当日最多只能买入2次

3. **卖出条件**：
   - 次日开盘卖出：如果次日开盘价低于昨日收盘价且第1分钟K线收阴，则清仓
   - 涨停开板卖出：若上一分钟为涨停，但当前已低于开盘价，则全仓卖出
   - MACDFS指标卖出：当MACDFS红柱连续下缩2根时触发卖出，第一次触发卖出1/2仓位，第二次触发卖出剩余仓位
   - **重要保护机制**：当股票处于涨停状态时，即使满足卖出条件也不会执行卖出操作，以避免错失继续上涨的机会

## 股票池更新机制

策略采用简化的股票池更新机制：

1. **启动即更新**：
   - 无论何时启动策略，都会立即更新股票池
   - 系统会自动根据当前时间（收盘前/收盘后）选择合适的数据源

2. **数据选择**：
   - **收盘前启动**：使用前一交易日数据作为选股依据
   - **收盘后启动**：使用当天数据作为选股依据，为次日交易做准备

3. **定时更新**：
   - 每日在设定的时间（默认收盘后）自动更新股票池
   - 使用当天的数据为次日交易做准备

## 注意事项

1. 策略基于分钟K线运行，需要保持程序持续运行
2. 确保QMT客户端已登录并正常连接
3. 启动策略后会立即更新股票池，并在每日设定时间自动更新
4. 根据自己的风险承受能力调整买入金额和交易次数 